{"version":3,"sources":["redux/dialogReducer.js","components/Common/Preloader/Preloader.module.css","api/api.js","components/NavBar/NavBar.module.css","reportWebVitals.js","redux/authReducer.js","redux/appReducer.js","redux/reduxStore.js","components/NavBar/NavBar.jsx","components/News/News.jsx","components/Music/Music.jsx","components/Settings/Settings.jsx","components/Login/Login.jsx","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","hoc/withSuspense.jsx","App.js","index.js","components/Common/FormControls/FormControl.jsx","components/Common/FormControls/FormControls.module.css","components/Header/Header.module.css","assets/images/preloader.gif","components/Common/Preloader/Preloader.jsx","Utils/Validators/Validators.js","components/Login/Login.module.css","redux/profileReducer.js","Utils/objectHelpers.js","redux/usersReducer.js"],"names":["ADD_MESSAGE","stateInitial","dialogsData","id","name","dialogs_messagesData","message","addMessage","type","dialogReducer","state","action","newMessage","module","exports","instance","axios","withCredentials","headers","baseURL","userAPI","getUsers","pageSize","currentPage","get","then","response","data","setFollow","userId","post","setUnfollow","delete","profileAPI","getProfile","getUserStatus","updateStatus","status","put","logAPI","isAuth","login","email","password","rememberMe","logout","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","SET_USER_DATA","initialState","setAuthUserData","payload","getAuthUserData","dispatch","a","resultCode","authReducer","SET_INITIALIZED","initialized","appReducer","reducers","combineReducers","ProfilePage","profileReducer","DialogPage","UsersPage","usersReducer","auth","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","NavBar","className","NavBarCss","navBar_inner","navBar_menu","activeClassName","active","to","News","Music","Settings","maxLength30","maxLength","LoginFormRedux","reduxForm","props","onSubmit","handleSubmit","createField","required","Input","error","FormControlCss","formSummaryError","connect","messages","length","stopSubmit","_error","LoginStyles","wrapper","loginForm","values","Header","HeaderStyles","header","header_inner","header_logo_title","log","onClick","HeaderContainer","this","React","Component","withSuspense","Suspense","fallback","Preloader","DialogsContainer","lazy","UsersContainer","ProfileContainer","App","initializeApp","path","render","exact","withRouter","promise","Promise","all","ReactDOM","document","getElementById","FormControl","input","meta","touched","hasError","FormControlStyles","children","restProps","Textarea","placeholder","text","validators","component","htmlFor","validate","PreloaderStyles","preloader","src","alt","value","max","ADD_POST","DELETE_POST","SET_USER_PROFILE","TOGGLE_IS_FETCHING","SET_USER_STATUS","postsData","likesCount","profile","isFetching","addPost","toggleIsFetching","setUserStatus","getUserProfile","updateUserStatus","newPost","filter","p","updateObjectInArray","items","itemId","objPropName","newObjProps","map","item","FOLLOW","UNFOLLOW","SET_USERS","SET_USERS_TOTAL_COUNT","SET_CURRENT_PAGE","TOGGLE_FOLLOWING_IN_PROGRESS","users","totalUsersCount","followingInProgress","followSuccess","unfollowSuccess","toggleFollowingInProgress","requestUsers","page","curPage","count","totalCount","followUnfollowFlow","apiMethod","actionCreator","follow","bind","unfollow","UsersReducer","followed"],"mappings":"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","file":"static/js/main.d8a470cc.chunk.js","sourcesContent":["const ADD_MESSAGE = 'dialog/ADD-MESSAGE';\r\n\r\nlet stateInitial = {\r\n    dialogsData: [\r\n        {id: 1, name: 'Oleg'},\r\n        {id: 2, name: 'Ivan'},\r\n        {id: 3, name: 'Kolya'},],\r\n    dialogs_messagesData: [\r\n        {id: 1, message: 'Hello, how r u?'},\r\n        {id: 2, message: 'I\\' fine'},\r\n        {id: 3, message: 'And u?'},],\r\n}\r\n\r\nconst dialogReducer = (state = stateInitial, action) => {\r\n    switch(action.type) {\r\n        case ADD_MESSAGE: {\r\n            let newMessage = {\r\n                id: 4,\r\n                message: action.message,\r\n            };\r\n            return {\r\n                ...state,\r\n                dialogs_messagesData: [...state.dialogs_messagesData, newMessage],\r\n            }\r\n        }\r\n        default: return state;\r\n    }\r\n}\r\n\r\n\r\nexport const addMessage = (message) => ({ type: ADD_MESSAGE, message })\r\n\r\nexport default dialogReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__3S_xF\"};","import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': '063e79e1-62a7-4390-b59e-d524e6f3f202',\r\n    },\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n})\r\n\r\nexport const userAPI = {\r\n    getUsers(pageSize = 5, currentPage = 1) {\r\n        return instance.get(`users?count=${pageSize}&page=${currentPage}`).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    setFollow(userId) {\r\n        return instance.post(`follow/${userId}`).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    setUnfollow(userId) {\r\n        return instance.delete(`follow/${userId}`).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return instance.get(`profile/${userId}`).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    getUserStatus(userId) {\r\n        return instance.get(`profile/status/${userId}`).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    updateStatus(status) {\r\n        return instance.put('profile/status', {status}).then(response => {\r\n            return response.data;\r\n        })\r\n    }\r\n}\r\n\r\nexport const logAPI = {\r\n    isAuth() {\r\n        return instance.get('auth/me').then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    login(email, password, rememberMe) {\r\n        return instance.post('/auth/login', {email, password, rememberMe}).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    logout() {\r\n        return instance.delete('/auth/login').then(response => {\r\n            return response.data\r\n        })\r\n    }\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navBar_inner\":\"NavBar_navBar_inner__36VxW\",\"navBar_menu\":\"NavBar_navBar_menu__1F6o4\",\"active\":\"NavBar_active__36kGM\"};","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {logAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA';\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    login: null,\r\n    email: null,\r\n    isAuth: false,\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA: {\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setAuthUserData = (userId, login, email, isAuth) => {\r\n    return {type: SET_USER_DATA, payload: {userId, login, email, isAuth}}\r\n}\r\n\r\nexport const getAuthUserData = () =>\r\n    async (dispatch) => {\r\n        const data = await logAPI.isAuth();\r\n\r\n        if (data.resultCode === 0) {\r\n            let {id, login, email} = data.data;\r\n            dispatch(setAuthUserData(id, login, email, true));\r\n        }\r\n    }\r\n\r\n\r\nexport const login = (email, password, rememberMe) =>\r\n    async (dispatch) => {\r\n        const data = await logAPI.login(email, password, rememberMe);\r\n        if (data.resultCode === 0) {\r\n            dispatch(getAuthUserData());\r\n        } else {\r\n            let message = data.messages.length > 0 ? data.messages[0] : 'Some error';\r\n            dispatch(stopSubmit('loginForm', {_error: message}));\r\n        }\r\n    }\r\n\r\nexport const logout = () =>\r\n    async (dispatch) => {\r\n        const data = await logAPI.logout();\r\n        if (data.resultCode === 0) {\r\n            dispatch(setAuthUserData(null, null, null, false));\r\n        }\r\n}\r\n\r\nexport default authReducer;\r\n","import {getAuthUserData} from \"./authReducer\";\r\n\r\nconst SET_INITIALIZED = 'app/SET_INITIALIZED';\r\n\r\nlet initialState = {\r\n    initialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case SET_INITIALIZED: {\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const initialiazedSuccess = () => {\r\n    return {type: SET_INITIALIZED}\r\n}\r\n\r\nexport const initializeApp = () => {\r\n    return (dispatch) => {\r\n        let promise = dispatch(getAuthUserData())\r\n\r\n        Promise.all([promise]).then(() => {\r\n            dispatch(initialiazedSuccess());\r\n        })\r\n    }\r\n}\r\n\r\nexport default appReducer;\r\n","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"./profileReducer\";\r\nimport dialogReducer from \"./dialogReducer\";\r\nimport usersReducer from \"./usersReducer\";\r\nimport authReducer from \"./authReducer\";\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from \"./appReducer\";\r\n\r\nlet reducers = combineReducers({\r\n    ProfilePage: profileReducer,\r\n    DialogPage: dialogReducer,\r\n    UsersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n    })\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\nwindow.__store__ = store;\r\n\r\nexport default store;","import NavBarCss from './NavBar.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst NavBar = () => {\r\n    return (\r\n        <nav>\r\n            <div className=\"container\">\r\n                <div className={NavBarCss.navBar_inner}>\r\n                    <ul className={NavBarCss.navBar_menu}>\r\n                        <li>\r\n                            <NavLink activeClassName={NavBarCss.active} to='/profile'>Profile</NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink activeClassName={NavBarCss.active} to='/dialogs'>Messages</NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink activeClassName={NavBarCss.active} to='/users'>Users</NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink activeClassName={NavBarCss.active} to='/news'>News</NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink activeClassName={NavBarCss.active} to='/music'>Music</NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink activeClassName={NavBarCss.active} to='/settings'>Settings</NavLink>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default NavBar;","\r\n\r\nconst News = () => {\r\n    return (\r\n        <div>\r\n            <p>News</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default News;","\r\n\r\nconst Music = () => {\r\n    return (\r\n        <div>\r\n            <p>Music</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Music;","\r\nconst Settings = () => {\r\n    return (\r\n        <div>\r\n            <p>Settings</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\nimport LoginStyles from './Login.module.css';\r\nimport {reduxForm} from \"redux-form\";\r\nimport {maxLength, required} from \"../../Utils/Validators/Validators\";\r\nimport {Input} from \"../Common/FormControls/FormControl\";\r\nimport {login} from \"../../redux/authReducer\";\r\nimport {connect} from \"react-redux\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {createField} from \"../Common/FormControls/FormControl\";\r\nimport FormControlCss from './../Common/FormControls/FormControls.module.css';\r\n\r\nconst maxLength30 = maxLength(30);\r\n\r\nconst LoginForm = (props) => {\r\n    return <form onSubmit={props.handleSubmit}>\r\n        {createField('email', 'Email', 'Email', [required, maxLength30], Input)}\r\n        {createField('password', 'Password', 'Password', [required, maxLength30], Input, {type: 'password'})}\r\n        {props.error && <div className={FormControlCss.formSummaryError}>\r\n            {props.error}\r\n        </div> }\r\n        <div>\r\n            {createField('rememberMe', '', 'Remember Me', [], 'input', {type: 'checkbox'})}\r\n        </div>\r\n        <div>\r\n            <button>Login</button>\r\n        </div>\r\n    </form>\r\n}\r\n\r\nconst LoginFormRedux = reduxForm({form: 'loginForm'})(LoginForm);\r\n\r\nconst Login = (props) => {\r\n    const onSubmit = (values) => {\r\n        props.login(values.email, values.password, values.rememberMe);\r\n    }\r\n\r\n    if(props.isAuth) return <Redirect to={'/profile'}/>\r\n\r\n    return <div className={LoginStyles.wrapper}>\r\n        <div className={LoginStyles.loginForm}>\r\n            <h1>Login</h1>\r\n            <LoginFormRedux onSubmit={onSubmit}/>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect(mapStateToProps, {login})(Login)","import HeaderStyles from './Header.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst Header = (props) => {\r\n  return (\r\n    <header className={HeaderStyles.header}>\r\n      <div className='container'>\r\n        <div className={HeaderStyles.header_inner}>\r\n          \r\n          <h1 className={HeaderStyles.header_logo_title}>Messenger</h1>\r\n\r\n            <div className={HeaderStyles.log}>\r\n                {props.isAuth ? <div>{props.login}<button onClick={props.logout}>Logout</button></div> :\r\n                    <NavLink to={'/login'}>Login</NavLink>}\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n};\r\n\r\nexport default Header;","import React from 'react'\r\nimport {connect} from \"react-redux\";\r\nimport Header from \"./Header\";\r\nimport {logout} from \"../../redux/authReducer\";\r\n\r\nclass HeaderContainer extends React.Component {\r\n    render() {\r\n        return (\r\n                <Header {...this.props} />\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n        email: state.auth.email,\r\n    }\r\n}\r\n\r\nexport default connect (mapStateToProps, {logout})(HeaderContainer);","import React from 'react';\r\nimport Preloader from \"../components/Common/Preloader/Preloader\";\r\n\r\nexport const withSuspense = (Component) => {\r\n    return (props) => {\r\n        return <React.Suspense fallback={<Preloader/>} >\r\n            <Component {...props}/>\r\n        </React.Suspense>\r\n    };\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport './App.css';\r\nimport NavBar from './components/NavBar/NavBar';\r\nimport News from './components/News/News';\r\nimport Music from './components/Music/Music';\r\nimport Settings from './components/Settings/Settings';\r\nimport LoginPage from './components/Login/Login';\r\nimport {Route, withRouter} from \"react-router-dom\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport {connect} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport {initializeApp} from \"./redux/appReducer\";\r\nimport Preloader from \"./components/Common/Preloader/Preloader\";\r\nimport {withSuspense} from \"./hoc/withSuspense\";\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\n\r\nclass App extends React.Component {\r\n  componentDidMount() {\r\n    this.props.initializeApp()\r\n  }\r\n\r\n  render() {\r\n      if(!this.props.initialized) {\r\n          return <Preloader/>\r\n      }\r\n      return (\r\n          <div className='app-wrapper'>\r\n            <HeaderContainer/>\r\n            <div className='main container'>\r\n              <NavBar/>\r\n              <Route path='/profile/:userId?' render={withSuspense(ProfileContainer)}/>\r\n              <Route path='/dialogs' render={withSuspense(DialogsContainer)}/>\r\n              <Route path='/users' render={withSuspense(UsersContainer)}/>\r\n              <Route exact path='/news' render={() => <News/>}/>\r\n              <Route exact path='/music' render={() => <Music/>}/>\r\n              <Route exact path='/settings' render={() => <Settings/>}/>\r\n              <Route exact path='/login' render={() => <LoginPage/>}/>\r\n            </div>\r\n          </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        initialized: state.app.initialized\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    withRouter,\r\n    connect(mapStateToProps, {initializeApp}))\r\n    (App);\r\n","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport store from './redux/reduxStore'\r\nimport App from \"./App\";\r\nimport {Provider} from \"react-redux\";\r\nimport {HashRouter} from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n    <HashRouter>\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    </HashRouter>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import React from 'react';\r\nimport FormControlStyles from './FormControls.module.css';\r\nimport {Field} from \"redux-form\";\r\n\r\nconst FormControl = ({input, meta: {touched, error}, ...props}) => {\r\n    const hasError = error && touched;\r\n    return <div>\r\n        <div className={hasError && FormControlStyles.error}>\r\n            {props.children}\r\n        </div>\r\n        <div className={FormControlStyles.error}>\r\n            {hasError && <span>{error}</span>}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport const Input = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return <FormControl {...props}><input {...input} {...restProps}/></FormControl>\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return <FormControl {...props}><textarea {...input} {...restProps}/></FormControl>\r\n}\r\n\r\nexport const createField = (name, placeholder = '', text, validators = [], component, props) => {\r\n    return <div>\r\n        <label htmlFor={name}>{text}</label>\r\n        <Field id={name} validate={validators} placeholder={placeholder} name={name} component={component} {...props}/>\r\n    </div>\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FormControls_error__gI9zN\",\"formSummaryError\":\"FormControls_formSummaryError__20tRY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__ItRLn\",\"header_inner\":\"Header_header_inner__msmp2\",\"header_logo_title\":\"Header_header_logo_title__2ZrXT\",\"log\":\"Header_log__3IZqF\"};","export default __webpack_public_path__ + \"static/media/preloader.9c9b0abe.gif\";","import preloader from '../../../assets/images/preloader.gif'\r\nimport PreloaderStyles from './Preloader.module.css'\r\n\r\nconst Preloader = () => {\r\n    return (\r\n    <div className={PreloaderStyles.preloader}>\r\n        <img src={preloader} alt=\"preloader\"/>\r\n    </div>)\r\n}\r\n\r\nexport default Preloader;","export const required = value => {\r\n    if (value) return undefined;\r\n\r\n    return 'Field is required';\r\n}\r\n\r\nexport const maxLength = max => (value) => {\r\n    if (value && value.length > max) return `Max length is ${max} symbols`;\r\n\r\n    return undefined;\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Login_wrapper__2ySg-\",\"loginForm\":\"Login_loginForm__1TNAS\"};","import {profileAPI} from \"../api/api\";\r\n\r\nconst ADD_POST = 'profile/ADD_POST';\r\nconst DELETE_POST = 'profile/DELETE_POST';\r\nconst SET_USER_PROFILE = 'profile/SET_USER_PROFILE';\r\nconst TOGGLE_IS_FETCHING = 'profile/TOGGLE_IS_FETCHING';\r\nconst SET_USER_STATUS = 'profile/SET_USER_STATUS';\r\n\r\nlet stateInitial = {\r\n    postsData: [\r\n        {id: 1, post: 'My first post', likesCount: 2},\r\n        {id: 2, post: 'Hi', likesCount: 7},\r\n        {id: 3, post: 'Hello', likesCount: 1},],\r\n    profile: null,\r\n    isFetching: false,\r\n    status: '',\r\n}\r\n\r\nconst profileReducer = (state = stateInitial, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST: {\r\n            let newPost = {\r\n                id: 4,\r\n                post: action.post,\r\n                likesCount: 0\r\n            };\r\n            return {\r\n                ...state,\r\n                postsData: [newPost, ...state.postsData],\r\n            };\r\n        }\r\n        case DELETE_POST: {\r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.filter(p => p.id !== action.id)\r\n            };\r\n        }\r\n        case SET_USER_PROFILE: {\r\n            return {\r\n                ...state,\r\n                profile: action.profile,\r\n            };\r\n        }\r\n        case TOGGLE_IS_FETCHING: {\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching,\r\n            };\r\n        }\r\n        case SET_USER_STATUS: {\r\n            return {\r\n                ...state,\r\n                status: action.status,\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPost = (post) => {\r\n    return {type: ADD_POST, post};\r\n}\r\nexport const deletePost = (id) => {\r\n    return {type: DELETE_POST, id};\r\n}\r\nexport const setUserProfile = (profile) => {\r\n    return {type: SET_USER_PROFILE, profile,}\r\n}\r\nexport const toggleIsFetching = (isFetching) => {\r\n    return {type: TOGGLE_IS_FETCHING, isFetching,}\r\n}\r\nexport const setUserStatus = (status) => {\r\n    return {type: SET_USER_STATUS, status,}\r\n}\r\n\r\nexport const getUserProfile = (userId) =>\r\n    async (dispatch) => {\r\n        dispatch(toggleIsFetching(true));\r\n        const data = await profileAPI.getProfile(userId);\r\n        dispatch(toggleIsFetching(false));\r\n        dispatch(setUserProfile(data));\r\n    }\r\n\r\n\r\nexport const getUserStatus = (userId) =>\r\n    async (dispatch) => {\r\n        const data = await profileAPI.getUserStatus(userId);\r\n        dispatch(setUserStatus(data));\r\n    }\r\n\r\nexport const updateUserStatus = (status) =>\r\n    async (dispatch) => {\r\n        const data = await profileAPI.updateStatus(status)\r\n        if (data.resultCode === 0) {\r\n            dispatch(setUserStatus(status));\r\n        }\r\n}\r\n\r\nexport default profileReducer;","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) =>\r\n    items.map(item => {\r\n        if (item[objPropName] === itemId) {\r\n            return {...item, ...newObjProps}\r\n        }\r\n        return item;\r\n})","import {userAPI} from \"../api/api\";\r\nimport {updateObjectInArray} from \"../Utils/objectHelpers\";\r\n\r\nconst FOLLOW = 'users/FOLLOW';\r\nconst UNFOLLOW = 'users/UNFOLLOW';\r\nconst SET_USERS = 'users/SET_USERS';\r\nconst SET_USERS_TOTAL_COUNT = 'users/SET_USERS_TOTAL_COUNT';\r\nconst SET_CURRENT_PAGE = 'users/SET_CURRENT_PAGE';\r\nconst TOGGLE_IS_FETCHING = 'users/TOGGLE_IS_FETCHING';\r\nconst TOGGLE_FOLLOWING_IN_PROGRESS = 'users/TOGGLE_FOLLOWING_IN_PROGRESS';\r\n\r\nlet stateInitial = {\r\n    users: [],\r\n    pageSize: 5,\r\n    totalUsersCount: 5,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: []\r\n}\r\n\r\nconst UsersReducer = (state = stateInitial, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW: {\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: true})\r\n            }\r\n        }\r\n        case UNFOLLOW: {\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: false})\r\n            }\r\n        }\r\n        case SET_USERS: {\r\n            return {\r\n                ...state,\r\n                users: [...action.users],\r\n            }\r\n        }\r\n        case SET_CURRENT_PAGE: {\r\n            return {\r\n                ...state,\r\n                currentPage: action.curPage,\r\n            }\r\n        }\r\n        case SET_USERS_TOTAL_COUNT: {\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.count,\r\n            }\r\n        }\r\n        case TOGGLE_IS_FETCHING: {\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching,\r\n            }\r\n        }\r\n        case TOGGLE_FOLLOWING_IN_PROGRESS: {\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const followSuccess = (userId) => {\r\n    return {type: FOLLOW, userId,}\r\n}\r\nexport const unfollowSuccess = (userId) => {\r\n    return {type: UNFOLLOW, userId,}\r\n}\r\nexport const setUsers = (users) => {\r\n    return {type: SET_USERS, users,}\r\n}\r\nexport const setCurrentPage = (curPage) => {\r\n    return {type: SET_CURRENT_PAGE, curPage,}\r\n}\r\nexport const setUsersTotalCount = (count) => {\r\n    return {type: SET_USERS_TOTAL_COUNT, count,}\r\n}\r\nexport const toggleIsFetching = (isFetching) => {\r\n    return {type: TOGGLE_IS_FETCHING, isFetching,}\r\n}\r\nexport const toggleFollowingInProgress = (isFetching, userId) => {\r\n    return {type: TOGGLE_FOLLOWING_IN_PROGRESS, isFetching, userId,}\r\n}\r\n\r\nexport const requestUsers = (pageSize, page) =>\r\n    async (dispatch) => {\r\n        dispatch(toggleIsFetching(true));\r\n        dispatch(setCurrentPage(page));\r\n\r\n        const data = await userAPI.getUsers(pageSize, page);\r\n\r\n        dispatch(toggleIsFetching(false));\r\n        dispatch(setUsers(data.items));\r\n        dispatch(setUsersTotalCount(data.totalCount));\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n        dispatch(toggleFollowingInProgress(true, userId));\r\n\r\n        const data = await apiMethod(userId);\r\n        if (data.resultCode === 0) {\r\n            dispatch(actionCreator(userId));\r\n        }\r\n        dispatch(toggleFollowingInProgress(false, userId));\r\n}\r\n\r\nexport const follow = (userId) =>\r\n    (dispatch) => {\r\n       followUnfollowFlow(dispatch, userId, userAPI.setFollow.bind(userAPI), followSuccess)\r\n}\r\n\r\nexport const unfollow = (userId) =>\r\n    (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId, userAPI.setUnfollow.bind(userAPI), unfollowSuccess)\r\n}\r\n\r\nexport default UsersReducer;\r\n"],"sourceRoot":""}